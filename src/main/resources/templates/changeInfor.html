<!DOCTYPE html>
<html layout:decorate="~{common/layout}">


<div layout:fragment="content" class="container my-3">
    <div th:text="${@rq.user.id}" id="userIdText"></div>
    <div> 회원정보 수정</div>


    <form th:action="@{/user/update}" id="updateForm" onsubmit="return false;" >


        <div class="mb-3">
            <label for="" class="form-label">이름</label>
            <input type="text" th:value="${@rq.user.userName}" name="userName" class="form-control">
        </div>

        <div class="mb-3">
            <label for="email" class="form-label">이메일</label>
            <input type="email" th:value="${@rq.user.email}" name="email" class="form-control">
        </div>
        <button type="button" class="btn btn-primary" onclick="updateUser();">회원가입</button>
    </form>
</div>



</html>

<script >
    function updateUser() {

    <!--// 1. 필드 유효성 검사-->
    const form = document.getElementById('updateForm');
    let userId=$('#userIdText').text();
    <!--validationMemberInfo(form);-->
    <!--console.log(form);-->
    console.log(userId+"!!!!!!!!!!");

    // 2. 파라미터 세팅
    const params = {}
    new FormData(form).forEach((value, key) => params[key] = value.trim());

    console.log(params);
    // 3. Save API 호출
    callApi('/user/information/'+userId, 'patch', params);
    alert('가입을 축하드립니다!\n로그인 후 서비스를 이용해 주세요.');

    }
</script>

<script th:src="@{/js/function.js}"></script>
<script th:src="@{/js/jquery-3.6.0.min.js}"></script>
<script th:src="@{/js/common.js}"></script>
